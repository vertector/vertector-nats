# Production Environment Configuration for NATS JetStream
# Copy this to .env and update with production values
# IMPORTANT: Never commit .env with real credentials to version control

# ============================================================================
# CONNECTION SETTINGS (Production - Clustered Setup)
# ============================================================================

# NATS cluster servers (use DNS names or IPs)
NATS_SERVERS=["nats://nats-1.prod.example.com:4222","nats://nats-2.prod.example.com:4222","nats://nats-3.prod.example.com:4222"]

# Unique client name (use hostname or pod name in K8s)
NATS_CLIENT_NAME=academic-schedule-service-prod

# Unlimited reconnections for production
NATS_MAX_RECONNECT_ATTEMPTS=-1

# Reconnect wait time
NATS_RECONNECT_WAIT_SECONDS=2

# ============================================================================
# AUTHENTICATION (REQUIRED FOR PRODUCTION)
# ============================================================================

NATS_ENABLE_AUTH=true
NATS_USERNAME=schedule_service_prod
NATS_PASSWORD=<USE_SECRETS_MANAGER>

# Alternative: Token-based auth
# NATS_TOKEN=<USE_SECRETS_MANAGER>

# ============================================================================
# TLS/SSL (REQUIRED FOR PRODUCTION)
# ============================================================================

NATS_ENABLE_TLS=true
NATS_TLS_CA_CERT_FILE=/etc/ssl/certs/nats/ca-cert.pem
NATS_TLS_CERT_FILE=/etc/ssl/certs/nats/client-cert.pem
NATS_TLS_KEY_FILE=/etc/ssl/private/nats/client-key.pem

# ============================================================================
# JETSTREAM
# ============================================================================

NATS_ENABLE_JETSTREAM=true
NATS_JETSTREAM_DOMAIN=production

# ============================================================================
# TIMEOUTS (Production - More generous)
# ============================================================================

NATS_CONNECT_TIMEOUT_SECONDS=10
NATS_REQUEST_TIMEOUT_SECONDS=10

# ============================================================================
# PERFORMANCE (Production - Higher limits)
# ============================================================================

# 2MB max payload for production
NATS_MAX_PAYLOAD_BYTES=2097152

# Larger pending buffer for high throughput
NATS_MAX_PENDING_MESSAGES=100000

# ============================================================================
# OBSERVABILITY (All enabled in production)
# ============================================================================

NATS_ENABLE_TRACING=true
NATS_ENABLE_METRICS=true
NATS_SERVICE_NAME=academic-schedule-service
OTLP_ENDPOINT=http://otel-collector.monitoring:4317
PROMETHEUS_PORT=8000

# ============================================================================
# LOGGING
# ============================================================================

LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================================================
# STREAM CONFIGURATION (Production Settings)
# ============================================================================

# Academic Events - Higher retention for production
NATS_STREAM_MAX_AGE_SECONDS=2592000  # 30 days
NATS_STREAM_REPLICAS=3                # 3 replicas for HA
NATS_STREAM_STORAGE=file
NATS_STREAM_MAX_BYTES=107374182400   # 100GB

# ============================================================================
# HEALTH CHECKS
# ============================================================================

HEALTH_CHECK_PORT=8000
HEALTH_CHECK_PATH=/health
METRICS_PATH=/metrics
